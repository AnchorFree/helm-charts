{{- if .Values.ruler.enabled -}}
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "cortex.fullname" . }}-ruler
  labels:
    app.kubernetes.io/name: {{ include "cortex.name" . }}
    helm.sh/chart: {{ include "cortex.chart" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/component: ruler
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  replicas: {{ .Values.ruler.replicaCount }}
  strategy:
    rollingUpdate:
      maxSurge: 0
      maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: {{ include "cortex.name" . }}
      app.kubernetes.io/instance: {{ .Release.Name }}
      app.kubernetes.io/component: ruler
  template:
    metadata:
      labels:
        app.kubernetes.io/name: {{ include "cortex.name" . }}
        app.kubernetes.io/instance: {{ .Release.Name }}
        app.kubernetes.io/component: ruler
    spec:
      containers:
      - name: ruler
        image: "{{ .Values.ruler.image.repository }}:{{ .Values.ruler.image.tag }}"
        imagePullPolicy: {{ .Values.ruler.image.pullPolicy }}
        args:
        - -ruler.alertmanager-url=http://{{ include "cortex.fullname" . }}-alertmanager.{{ .Release.Namespace }}.svc.cluster.local{{ default .Values.cortex.alertmanager_web_external_url .Values.alertmanager.alertmanager_web_external_url }}
        {{- if default .Values.cortex.alsologtostderr .Values.ruler.alsologtostderr }}
        - -alsologtostderr={{ default .Values.cortex.alsologtostderr .Values.ruler.alsologtostderr }}
        {{- end }}
        {{- if default .Values.cortex.applicationautoscaling_url .Values.ruler.applicationautoscaling_url }}
        - -applicationautoscaling.url={{ default .Values.cortex.applicationautoscaling_url .Values.ruler.applicationautoscaling_url }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_column_key_from .Values.ruler.bigtable_column_key_from }}
        - -bigtable.column-key-from={{ default .Values.cortex.bigtable_column_key_from .Values.ruler.bigtable_column_key_from }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_grpc_max_recv_msg_size .Values.ruler.bigtable_grpc_max_recv_msg_size }}
        - -bigtable.grpc-max-recv-msg-size={{ default .Values.cortex.bigtable_grpc_max_recv_msg_size .Values.ruler.bigtable_grpc_max_recv_msg_size }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_grpc_max_send_msg_size .Values.ruler.bigtable_grpc_max_send_msg_size }}
        - -bigtable.grpc-max-send-msg-size={{ default .Values.cortex.bigtable_grpc_max_send_msg_size .Values.ruler.bigtable_grpc_max_send_msg_size }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_grpc_use_gzip_compression .Values.ruler.bigtable_grpc_use_gzip_compression }}
        - -bigtable.grpc-use-gzip-compression={{ default .Values.cortex.bigtable_grpc_use_gzip_compression .Values.ruler.bigtable_grpc_use_gzip_compression }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_instance .Values.ruler.bigtable_instance }}
        - -bigtable.instance={{ default .Values.cortex.bigtable_instance .Values.ruler.bigtable_instance }}
        {{- end }}
        {{- if default .Values.cortex.bigtable_project .Values.ruler.bigtable_project }}
        - -bigtable.project={{ default .Values.cortex.bigtable_project .Values.ruler.bigtable_project }}
        {{- end }}
        {{- if default .Values.cortex.billing_ingester .Values.ruler.billing_ingester }}
        - -billing.ingester={{ default .Values.cortex.billing_ingester .Values.ruler.billing_ingester }}
        {{- end }}
        {{- if default .Values.cortex.billing_max_buffered_events .Values.ruler.billing_max_buffered_events }}
        - -billing.max-buffered-events={{ default .Values.cortex.billing_max_buffered_events .Values.ruler.billing_max_buffered_events }}
        {{- end }}
        {{- if default .Values.cortex.billing_retry_delay .Values.ruler.billing_retry_delay }}
        - -billing.retry-delay={{ default .Values.cortex.billing_retry_delay .Values.ruler.billing_retry_delay }}
        {{- end }}
        {{- if default .Values.cortex.boltdb_dir .Values.ruler.boltdb_dir }}
        - -boltdb.dir={{ default .Values.cortex.boltdb_dir .Values.ruler.boltdb_dir }}
        {{- end }}
        {{- if default .Values.cortex.cache_enable_diskcache .Values.ruler.cache_enable_diskcache }}
        - -cache.enable-diskcache={{ default .Values.cortex.cache_enable_diskcache .Values.ruler.cache_enable_diskcache }}
        {{- end }}
        {{- if default .Values.cortex.cache_enable_fifocache .Values.ruler.cache_enable_fifocache }}
        - -cache.enable-fifocache={{ default .Values.cortex.cache_enable_fifocache .Values.ruler.cache_enable_fifocache }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_addresses .Values.ruler.cassandra_addresses }}
        - -cassandra.addresses={{ default .Values.cortex.cassandra_addresses .Values.ruler.cassandra_addresses }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_auth .Values.ruler.cassandra_auth }}
        - -cassandra.auth={{ default .Values.cortex.cassandra_auth .Values.ruler.cassandra_auth }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_ca_path .Values.ruler.cassandra_ca_path }}
        - -cassandra.ca-path={{ default .Values.cortex.cassandra_ca_path .Values.ruler.cassandra_ca_path }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_consistency .Values.ruler.cassandra_consistency }}
        - -cassandra.consistency={{ default .Values.cortex.cassandra_consistency .Values.ruler.cassandra_consistency }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_disable_initial_host_lookup .Values.ruler.cassandra_disable_initial_host_lookup }}
        - -cassandra.disable-initial-host-lookup={{ default .Values.cortex.cassandra_disable_initial_host_lookup .Values.ruler.cassandra_disable_initial_host_lookup }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_host_verification .Values.ruler.cassandra_host_verification }}
        - -cassandra.host-verification={{ default .Values.cortex.cassandra_host_verification .Values.ruler.cassandra_host_verification }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_keyspace .Values.ruler.cassandra_keyspace }}
        - -cassandra.keyspace={{ default .Values.cortex.cassandra_keyspace .Values.ruler.cassandra_keyspace }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_password .Values.ruler.cassandra_password }}
        - -cassandra.password={{ default .Values.cortex.cassandra_password .Values.ruler.cassandra_password }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_port .Values.ruler.cassandra_port }}
        - -cassandra.port={{ default .Values.cortex.cassandra_port .Values.ruler.cassandra_port }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_replication_factor .Values.ruler.cassandra_replication_factor }}
        - -cassandra.replication-factor={{ default .Values.cortex.cassandra_replication_factor .Values.ruler.cassandra_replication_factor }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_ssl .Values.ruler.cassandra_ssl }}
        - -cassandra.ssl={{ default .Values.cortex.cassandra_ssl .Values.ruler.cassandra_ssl }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_timeout .Values.ruler.cassandra_timeout }}
        - -cassandra.timeout={{ default .Values.cortex.cassandra_timeout .Values.ruler.cassandra_timeout }}
        {{- end }}
        {{- if default .Values.cortex.cassandra_username .Values.ruler.cassandra_username }}
        - -cassandra.username={{ default .Values.cortex.cassandra_username .Values.ruler.cassandra_username }}
        {{- end }}
        {{- if default .Values.cortex.chunk_storage_client .Values.ruler.chunk_storage_client }}
        - -chunk.storage-client={{ default .Values.cortex.chunk_storage_client .Values.ruler.chunk_storage_client }}
        {{- end }}
        {{- if default .Values.cortex.config_yaml .Values.ruler.config_yaml }}
        - -config-yaml={{ default .Values.cortex.config_yaml .Values.ruler.config_yaml }}
        {{- end }}
        {{- if default .Values.cortex.consul_acltoken .Values.ruler.consul_acltoken }}
        - -consul.acltoken={{ default .Values.cortex.consul_acltoken .Values.ruler.consul_acltoken }}
        {{- end }}
        {{- if default .Values.cortex.consul_client_timeout .Values.ruler.consul_client_timeout }}
        - -consul.client-timeout={{ default .Values.cortex.consul_client_timeout .Values.ruler.consul_client_timeout }}
        {{- end }}
        {{- if default .Values.cortex.consul_consistent_reads .Values.ruler.consul_consistent_reads }}
        - -consul.consistent-reads={{ default .Values.cortex.consul_consistent_reads .Values.ruler.consul_consistent_reads }}
        {{- end }}
        {{- if default .Values.cortex.consul_hostname .Values.ruler.consul_hostname }}
        - -consul.hostname={{ default .Values.cortex.consul_hostname .Values.ruler.consul_hostname }}
        {{- end }}
        {{- if default .Values.cortex.consul_prefix .Values.ruler.consul_prefix }}
        - -consul.prefix={{ default .Values.cortex.consul_prefix .Values.ruler.consul_prefix }}
        {{- end }}
        {{- if default .Values.cortex.database_migrations .Values.ruler.database_migrations }}
        - -database.migrations={{ default .Values.cortex.database_migrations .Values.ruler.database_migrations }}
        {{- end }}
        {{- if default .Values.cortex.database_password_file .Values.ruler.database_password_file }}
        - -database.password-file={{ default .Values.cortex.database_password_file .Values.ruler.database_password_file }}
        {{- end }}
        {{- if default .Values.cortex.database_uri .Values.ruler.database_uri }}
        - -database.uri={{ default .Values.cortex.database_uri .Values.ruler.database_uri }}
        {{- end }}
        {{- if default .Values.cortex.default_validity .Values.ruler.default_validity }}
        - -default-validity={{ default .Values.cortex.default_validity .Values.ruler.default_validity }}
        {{- end }}
        {{- if default .Values.cortex.diskcache_path .Values.ruler.diskcache_path }}
        - -diskcache.path={{ default .Values.cortex.diskcache_path .Values.ruler.diskcache_path }}
        {{- end }}
        {{- if default .Values.cortex.diskcache_size .Values.ruler.diskcache_size }}
        - -diskcache.size={{ default .Values.cortex.diskcache_size .Values.ruler.diskcache_size }}
        {{- end }}
        {{- if default .Values.cortex.distributor_client_cleanup_period .Values.ruler.distributor_client_cleanup_period }}
        - -distributor.client-cleanup-period={{ default .Values.cortex.distributor_client_cleanup_period .Values.ruler.distributor_client_cleanup_period }}
        {{- end }}
        {{- if default .Values.cortex.distributor_enable_billing .Values.ruler.distributor_enable_billing }}
        - -distributor.enable-billing={{ default .Values.cortex.distributor_enable_billing .Values.ruler.distributor_enable_billing }}
        {{- end }}
        {{- if default .Values.cortex.distributor_extra_query_delay .Values.ruler.distributor_extra_query_delay }}
        - -distributor.extra-query-delay={{ default .Values.cortex.distributor_extra_query_delay .Values.ruler.distributor_extra_query_delay }}
        {{- end }}
        {{- if default .Values.cortex.distributor_health_check_ingesters .Values.ruler.distributor_health_check_ingesters }}
        - -distributor.health-check-ingesters={{ default .Values.cortex.distributor_health_check_ingesters .Values.ruler.distributor_health_check_ingesters }}
        {{- end }}
        {{- if default .Values.cortex.distributor_ingestion_burst_size .Values.ruler.distributor_ingestion_burst_size }}
        - -distributor.ingestion-burst-size={{ default .Values.cortex.distributor_ingestion_burst_size .Values.ruler.distributor_ingestion_burst_size }}
        {{- end }}
        {{- if default .Values.cortex.distributor_ingestion_rate_limit .Values.ruler.distributor_ingestion_rate_limit }}
        - -distributor.ingestion-rate-limit={{ default .Values.cortex.distributor_ingestion_rate_limit .Values.ruler.distributor_ingestion_rate_limit }}
        {{- end }}
        {{- if default .Values.cortex.distributor_limiter_reload_period .Values.ruler.distributor_limiter_reload_period }}
        - -distributor.limiter-reload-period={{ default .Values.cortex.distributor_limiter_reload_period .Values.ruler.distributor_limiter_reload_period }}
        {{- end }}
        {{- if default .Values.cortex.distributor_remote_timeout .Values.ruler.distributor_remote_timeout }}
        - -distributor.remote-timeout={{ default .Values.cortex.distributor_remote_timeout .Values.ruler.distributor_remote_timeout }}
        {{- end }}
        {{- if default .Values.cortex.distributor_replication_factor .Values.ruler.distributor_replication_factor }}
        - -distributor.replication-factor={{ default .Values.cortex.distributor_replication_factor .Values.ruler.distributor_replication_factor }}
        {{- end }}
        {{- if default .Values.cortex.distributor_shard_by_all_labels .Values.ruler.distributor_shard_by_all_labels }}
        - -distributor.shard-by-all-labels={{ default .Values.cortex.distributor_shard_by_all_labels .Values.ruler.distributor_shard_by_all_labels }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_api_limit .Values.ruler.dynamodb_api_limit }}
        - -dynamodb.api-limit={{ default .Values.cortex.dynamodb_api_limit .Values.ruler.dynamodb_api_limit }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_base64_buckets_from .Values.ruler.dynamodb_base64_buckets_from }}
        - -dynamodb.base64-buckets-from={{ default .Values.cortex.dynamodb_base64_buckets_from .Values.ruler.dynamodb_base64_buckets_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_table_from .Values.ruler.dynamodb_chunk_table_from }}
        - -dynamodb.chunk-table.from={{ default .Values.cortex.dynamodb_chunk_table_from .Values.ruler.dynamodb_chunk_table_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_table_period .Values.ruler.dynamodb_chunk_table_period }}
        - -dynamodb.chunk-table.period={{ default .Values.cortex.dynamodb_chunk_table_period .Values.ruler.dynamodb_chunk_table_period }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_table_prefix .Values.ruler.dynamodb_chunk_table_prefix }}
        - -dynamodb.chunk-table.prefix={{ default .Values.cortex.dynamodb_chunk_table_prefix .Values.ruler.dynamodb_chunk_table_prefix }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_table_tag .Values.ruler.dynamodb_chunk_table_tag }}
        - -dynamodb.chunk-table.tag={{ default .Values.cortex.dynamodb_chunk_table_tag .Values.ruler.dynamodb_chunk_table_tag }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_gang_size .Values.ruler.dynamodb_chunk_gang_size }}
        - -dynamodb.chunk.gang.size={{ default .Values.cortex.dynamodb_chunk_gang_size .Values.ruler.dynamodb_chunk_gang_size }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_chunk_get_max_parallelism .Values.ruler.dynamodb_chunk_get_max_parallelism }}
        - -dynamodb.chunk.get.max.parallelism={{ default .Values.cortex.dynamodb_chunk_get_max_parallelism .Values.ruler.dynamodb_chunk_get_max_parallelism }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_daily_buckets_from .Values.ruler.dynamodb_daily_buckets_from }}
        - -dynamodb.daily-buckets-from={{ default .Values.cortex.dynamodb_daily_buckets_from .Values.ruler.dynamodb_daily_buckets_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_max_backoff .Values.ruler.dynamodb_max_backoff }}
        - -dynamodb.max-backoff={{ default .Values.cortex.dynamodb_max_backoff .Values.ruler.dynamodb_max_backoff }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_max_retries .Values.ruler.dynamodb_max_retries }}
        - -dynamodb.max-retries={{ default .Values.cortex.dynamodb_max_retries .Values.ruler.dynamodb_max_retries }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_min_backoff .Values.ruler.dynamodb_min_backoff }}
        - -dynamodb.min-backoff={{ default .Values.cortex.dynamodb_min_backoff .Values.ruler.dynamodb_min_backoff }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_original_table_name .Values.ruler.dynamodb_original_table_name }}
        - -dynamodb.original-table-name={{ default .Values.cortex.dynamodb_original_table_name .Values.ruler.dynamodb_original_table_name }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_periodic_table_from .Values.ruler.dynamodb_periodic_table_from }}
        - -dynamodb.periodic-table.from={{ default .Values.cortex.dynamodb_periodic_table_from .Values.ruler.dynamodb_periodic_table_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_periodic_table_period .Values.ruler.dynamodb_periodic_table_period }}
        - -dynamodb.periodic-table.period={{ default .Values.cortex.dynamodb_periodic_table_period .Values.ruler.dynamodb_periodic_table_period }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_periodic_table_prefix .Values.ruler.dynamodb_periodic_table_prefix }}
        - -dynamodb.periodic-table.prefix={{ default .Values.cortex.dynamodb_periodic_table_prefix .Values.ruler.dynamodb_periodic_table_prefix }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_periodic_table_tag .Values.ruler.dynamodb_periodic_table_tag }}
        - -dynamodb.periodic-table.tag={{ default .Values.cortex.dynamodb_periodic_table_tag .Values.ruler.dynamodb_periodic_table_tag }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_url .Values.ruler.dynamodb_url }}
        - -dynamodb.url={{ default .Values.cortex.dynamodb_url .Values.ruler.dynamodb_url }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_use_periodic_tables .Values.ruler.dynamodb_use_periodic_tables }}
        - -dynamodb.use-periodic-tables={{ default .Values.cortex.dynamodb_use_periodic_tables .Values.ruler.dynamodb_use_periodic_tables }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_v4_schema_from .Values.ruler.dynamodb_v4_schema_from }}
        - -dynamodb.v4-schema-from={{ default .Values.cortex.dynamodb_v4_schema_from .Values.ruler.dynamodb_v4_schema_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_v5_schema_from .Values.ruler.dynamodb_v5_schema_from }}
        - -dynamodb.v5-schema-from={{ default .Values.cortex.dynamodb_v5_schema_from .Values.ruler.dynamodb_v5_schema_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_v6_schema_from .Values.ruler.dynamodb_v6_schema_from }}
        - -dynamodb.v6-schema-from={{ default .Values.cortex.dynamodb_v6_schema_from .Values.ruler.dynamodb_v6_schema_from }}
        {{- end }}
        {{- if default .Values.cortex.dynamodb_v9_schema_from .Values.ruler.dynamodb_v9_schema_from }}
        - -dynamodb.v9-schema-from={{ default .Values.cortex.dynamodb_v9_schema_from .Values.ruler.dynamodb_v9_schema_from }}
        {{- end }}
        {{- if default .Values.cortex.fifocache_duration .Values.ruler.fifocache_duration }}
        - -fifocache.duration={{ default .Values.cortex.fifocache_duration .Values.ruler.fifocache_duration }}
        {{- end }}
        {{- if default .Values.cortex.fifocache_size .Values.ruler.fifocache_size }}
        - -fifocache.size={{ default .Values.cortex.fifocache_size .Values.ruler.fifocache_size }}
        {{- end }}
        {{- if default .Values.cortex.gcs_bucketname .Values.ruler.gcs_bucketname }}
        - -gcs.bucketname={{ default .Values.cortex.gcs_bucketname .Values.ruler.gcs_bucketname }}
        {{- end }}
        {{- if default .Values.cortex.httptest_serve .Values.ruler.httptest_serve }}
        - -httptest.serve={{ default .Values.cortex.httptest_serve .Values.ruler.httptest_serve }}
        {{- end }}
        {{- if default .Values.cortex.ingester_client_grpc_max_recv_msg_size .Values.ruler.ingester_client_grpc_max_recv_msg_size }}
        - -ingester.client.grpc-max-recv-msg-size={{ default .Values.cortex.ingester_client_grpc_max_recv_msg_size .Values.ruler.ingester_client_grpc_max_recv_msg_size }}
        {{- end }}
        {{- if default .Values.cortex.ingester_client_grpc_max_send_msg_size .Values.ruler.ingester_client_grpc_max_send_msg_size }}
        - -ingester.client.grpc-max-send-msg-size={{ default .Values.cortex.ingester_client_grpc_max_send_msg_size .Values.ruler.ingester_client_grpc_max_send_msg_size }}
        {{- end }}
        {{- if default .Values.cortex.ingester_client_grpc_use_gzip_compression .Values.ruler.ingester_client_grpc_use_gzip_compression }}
        - -ingester.client.grpc-use-gzip-compression={{ default .Values.cortex.ingester_client_grpc_use_gzip_compression .Values.ruler.ingester_client_grpc_use_gzip_compression }}
        {{- end }}
        {{- if default .Values.cortex.ingester_max_samples_per_query .Values.ruler.ingester_max_samples_per_query }}
        - -ingester.max-samples-per-query={{ default .Values.cortex.ingester_max_samples_per_query .Values.ruler.ingester_max_samples_per_query }}
        {{- end }}
        {{- if default .Values.cortex.ingester_max_series_per_metric .Values.ruler.ingester_max_series_per_metric }}
        - -ingester.max-series-per-metric={{ default .Values.cortex.ingester_max_series_per_metric .Values.ruler.ingester_max_series_per_metric }}
        {{- end }}
        {{- if default .Values.cortex.ingester_max_series_per_query .Values.ruler.ingester_max_series_per_query }}
        - -ingester.max-series-per-query={{ default .Values.cortex.ingester_max_series_per_query .Values.ruler.ingester_max_series_per_query }}
        {{- end }}
        {{- if default .Values.cortex.ingester_max_series_per_user .Values.ruler.ingester_max_series_per_user }}
        - -ingester.max-series-per-user={{ default .Values.cortex.ingester_max_series_per_user .Values.ruler.ingester_max_series_per_user }}
        {{- end }}
        {{- if default .Values.cortex.limits_per_user_override_config .Values.ruler.limits_per_user_override_config }}
        - -limits.per-user-override-config={{ default .Values.cortex.limits_per_user_override_config .Values.ruler.limits_per_user_override_config }}
        {{- end }}
        {{- if default .Values.cortex.limits_per_user_override_period .Values.ruler.limits_per_user_override_period }}
        - -limits.per-user-override-period={{ default .Values.cortex.limits_per_user_override_period .Values.ruler.limits_per_user_override_period }}
        {{- end }}
        {{- if default .Values.cortex.local_chunk_directory .Values.ruler.local_chunk_directory }}
        - -local.chunk-directory={{ default .Values.cortex.local_chunk_directory .Values.ruler.local_chunk_directory }}
        {{- end }}
        {{- if default .Values.cortex.log_level .Values.ruler.log_level }}
        - -log.level={{ default .Values.cortex.log_level .Values.ruler.log_level }}
        {{- end }}
        {{- if default .Values.cortex.log_backtrace_at .Values.ruler.log_backtrace_at }}
        - -log_backtrace_at={{ default .Values.cortex.log_backtrace_at .Values.ruler.log_backtrace_at }}
        {{- end }}
        {{- if default .Values.cortex.log_dir .Values.ruler.log_dir }}
        - -log_dir={{ default .Values.cortex.log_dir .Values.ruler.log_dir }}
        {{- end }}
        {{- if default .Values.cortex.logtostderr .Values.ruler.logtostderr }}
        - -logtostderr={{ default .Values.cortex.logtostderr .Values.ruler.logtostderr }}
        {{- end }}
        {{- if default .Values.cortex.memcache_write_back_buffer .Values.ruler.memcache_write_back_buffer }}
        - -memcache.write-back-buffer={{ default .Values.cortex.memcache_write_back_buffer .Values.ruler.memcache_write_back_buffer }}
        {{- end }}
        {{- if default .Values.cortex.memcache_write_back_goroutines .Values.ruler.memcache_write_back_goroutines }}
        - -memcache.write-back-goroutines={{ default .Values.cortex.memcache_write_back_goroutines .Values.ruler.memcache_write_back_goroutines }}
        {{- end }}
        {{- if default .Values.cortex.memcached_batchsize .Values.ruler.memcached_batchsize }}
        - -memcached.batchsize={{ default .Values.cortex.memcached_batchsize .Values.ruler.memcached_batchsize }}
        {{- end }}
        {{- if default .Values.cortex.memcached_expiration .Values.ruler.memcached_expiration }}
        - -memcached.expiration={{ default .Values.cortex.memcached_expiration .Values.ruler.memcached_expiration }}
        {{- end }}
        {{- if default .Values.cortex.memcached_hostname .Values.ruler.memcached_hostname }}
        - -memcached.hostname={{ default .Values.cortex.memcached_hostname .Values.ruler.memcached_hostname }}
        {{- end }}
        {{- if default .Values.cortex.memcached_max_idle_conns .Values.ruler.memcached_max_idle_conns }}
        - -memcached.max-idle-conns={{ default .Values.cortex.memcached_max_idle_conns .Values.ruler.memcached_max_idle_conns }}
        {{- end }}
        {{- if default .Values.cortex.memcached_parallelism .Values.ruler.memcached_parallelism }}
        - -memcached.parallelism={{ default .Values.cortex.memcached_parallelism .Values.ruler.memcached_parallelism }}
        {{- end }}
        {{- if default .Values.cortex.memcached_service .Values.ruler.memcached_service }}
        - -memcached.service={{ default .Values.cortex.memcached_service .Values.ruler.memcached_service }}
        {{- end }}
        {{- if default .Values.cortex.memcached_timeout .Values.ruler.memcached_timeout }}
        - -memcached.timeout={{ default .Values.cortex.memcached_timeout .Values.ruler.memcached_timeout }}
        {{- end }}
        {{- if default .Values.cortex.memcached_update_interval .Values.ruler.memcached_update_interval }}
        - -memcached.update-interval={{ default .Values.cortex.memcached_update_interval .Values.ruler.memcached_update_interval }}
        {{- end }}
        {{- if default .Values.cortex.metrics_error_rate_query .Values.ruler.metrics_error_rate_query }}
        - -metrics.error-rate-query={{ default .Values.cortex.metrics_error_rate_query .Values.ruler.metrics_error_rate_query }}
        {{- end }}
        {{- if default .Values.cortex.metrics_queue_length_query .Values.ruler.metrics_queue_length_query }}
        - -metrics.queue-length-query={{ default .Values.cortex.metrics_queue_length_query .Values.ruler.metrics_queue_length_query }}
        {{- end }}
        {{- if default .Values.cortex.metrics_read_error_query .Values.ruler.metrics_read_error_query }}
        - -metrics.read-error-query={{ default .Values.cortex.metrics_read_error_query .Values.ruler.metrics_read_error_query }}
        {{- end }}
        {{- if default .Values.cortex.metrics_read_usage_query .Values.ruler.metrics_read_usage_query }}
        - -metrics.read-usage-query={{ default .Values.cortex.metrics_read_usage_query .Values.ruler.metrics_read_usage_query }}
        {{- end }}
        {{- if default .Values.cortex.metrics_scale_up_factor .Values.ruler.metrics_scale_up_factor }}
        - -metrics.scale-up-factor={{ default .Values.cortex.metrics_scale_up_factor .Values.ruler.metrics_scale_up_factor }}
        {{- end }}
        {{- if default .Values.cortex.metrics_target_queue_length .Values.ruler.metrics_target_queue_length }}
        - -metrics.target-queue-length={{ default .Values.cortex.metrics_target_queue_length .Values.ruler.metrics_target_queue_length }}
        {{- end }}
        {{- if default .Values.cortex.metrics_url .Values.ruler.metrics_url }}
        - -metrics.url={{ default .Values.cortex.metrics_url .Values.ruler.metrics_url }}
        {{- end }}
        {{- if default .Values.cortex.metrics_usage_query .Values.ruler.metrics_usage_query }}
        - -metrics.usage-query={{ default .Values.cortex.metrics_usage_query .Values.ruler.metrics_usage_query }}
        {{- end }}
        {{- if default .Values.cortex.promql_lookback_delta .Values.ruler.promql_lookback_delta }}
        - -promql.lookback-delta={{ default .Values.cortex.promql_lookback_delta .Values.ruler.promql_lookback_delta }}
        {{- end }}
        {{- if default .Values.cortex.querier_batch_iterators .Values.ruler.querier_batch_iterators }}
        - -querier.batch-iterators={{ default .Values.cortex.querier_batch_iterators .Values.ruler.querier_batch_iterators }}
        {{- end }}
        {{- if default .Values.cortex.querier_ingester_streaming .Values.ruler.querier_ingester_streaming }}
        - -querier.ingester-streaming={{ default .Values.cortex.querier_ingester_streaming .Values.ruler.querier_ingester_streaming }}
        {{- end }}
        {{- if default .Values.cortex.querier_iterators .Values.ruler.querier_iterators }}
        - -querier.iterators={{ default .Values.cortex.querier_iterators .Values.ruler.querier_iterators }}
        {{- end }}
        {{- if default .Values.cortex.querier_max_concurrent .Values.ruler.querier_max_concurrent }}
        - -querier.max-concurrent={{ default .Values.cortex.querier_max_concurrent .Values.ruler.querier_max_concurrent }}
        {{- end }}
        {{- if default .Values.cortex.querier_max_samples .Values.ruler.querier_max_samples }}
        - -querier.max-samples={{ default .Values.cortex.querier_max_samples .Values.ruler.querier_max_samples }}
        {{- end }}
        {{- if default .Values.cortex.querier_query_ingesters_within .Values.ruler.querier_query_ingesters_within }}
        - -querier.query-ingesters-within={{ default .Values.cortex.querier_query_ingesters_within .Values.ruler.querier_query_ingesters_within }}
        {{- end }}
        {{- if default .Values.cortex.querier_timeout .Values.ruler.querier_timeout }}
        - -querier.timeout={{ default .Values.cortex.querier_timeout .Values.ruler.querier_timeout }}
        {{- end }}
        {{- if default .Values.cortex.ring_heartbeat_timeout .Values.ruler.ring_heartbeat_timeout }}
        - -ring.heartbeat-timeout={{ default .Values.cortex.ring_heartbeat_timeout .Values.ruler.ring_heartbeat_timeout }}
        {{- end }}
        {{- if default .Values.cortex.ring_store .Values.ruler.ring_store }}
        - -ring.store={{ default .Values.cortex.ring_store .Values.ruler.ring_store }}
        {{- end }}
        {{- if default .Values.cortex.ruler_alertmanager_discovery .Values.ruler.ruler_alertmanager_discovery }}
        - -ruler.alertmanager-discovery={{ default .Values.cortex.ruler_alertmanager_discovery .Values.ruler.ruler_alertmanager_discovery }}
        {{- end }}
        {{- if default .Values.cortex.ruler_alertmanager_refresh_interval .Values.ruler.ruler_alertmanager_refresh_interval }}
        - -ruler.alertmanager-refresh-interval={{ default .Values.cortex.ruler_alertmanager_refresh_interval .Values.ruler.ruler_alertmanager_refresh_interval }}
        {{- end }}
        {{- if default .Values.cortex.ruler_evaluation_interval .Values.ruler.ruler_evaluation_interval }}
        - -ruler.evaluation-interval={{ default .Values.cortex.ruler_evaluation_interval .Values.ruler.ruler_evaluation_interval }}
        {{- end }}
        {{- if default .Values.cortex.ruler_external_url .Values.ruler.ruler_external_url }}
        - -ruler.external.url={{ default .Values.cortex.ruler_external_url .Values.ruler.ruler_external_url }}
        {{- end }}
        {{- if default .Values.cortex.ruler_group_timeout .Values.ruler.ruler_group_timeout }}
        - -ruler.group-timeout={{ default .Values.cortex.ruler_group_timeout .Values.ruler.ruler_group_timeout }}
        {{- end }}
        {{- if default .Values.cortex.ruler_notification_queue_capacity .Values.ruler.ruler_notification_queue_capacity }}
        - -ruler.notification-queue-capacity={{ default .Values.cortex.ruler_notification_queue_capacity .Values.ruler.ruler_notification_queue_capacity }}
        {{- end }}
        {{- if default .Values.cortex.ruler_notification_timeout .Values.ruler.ruler_notification_timeout }}
        - -ruler.notification-timeout={{ default .Values.cortex.ruler_notification_timeout .Values.ruler.ruler_notification_timeout }}
        {{- end }}
        {{- if default .Values.cortex.ruler_num_workers .Values.ruler.ruler_num_workers }}
        - -ruler.num-workers={{ default .Values.cortex.ruler_num_workers .Values.ruler.ruler_num_workers }}
        {{- end }}
        {{- if default .Values.cortex.s3_url .Values.ruler.s3_url }}
        - -s3.url={{ default .Values.cortex.s3_url .Values.ruler.s3_url }}
        {{- end }}
        {{- if default .Values.cortex.server_graceful_shutdown_timeout .Values.ruler.server_graceful_shutdown_timeout }}
        - -server.graceful-shutdown-timeout={{ default .Values.cortex.server_graceful_shutdown_timeout .Values.ruler.server_graceful_shutdown_timeout }}
        {{- end }}
        {{- if default .Values.cortex.server_grpc_listen_port .Values.ruler.server_grpc_listen_port }}
        - -server.grpc-listen-port={{ default .Values.cortex.server_grpc_listen_port .Values.ruler.server_grpc_listen_port }}
        {{- end }}
        {{- if default .Values.cortex.server_http_idle_timeout .Values.ruler.server_http_idle_timeout }}
        - -server.http-idle-timeout={{ default .Values.cortex.server_http_idle_timeout .Values.ruler.server_http_idle_timeout }}
        {{- end }}
        {{- if default .Values.cortex.server_http_listen_port .Values.ruler.server_http_listen_port }}
        - -server.http-listen-port={{ default .Values.cortex.server_http_listen_port .Values.ruler.server_http_listen_port }}
        {{- end }}
        {{- if default .Values.cortex.server_http_read_timeout .Values.ruler.server_http_read_timeout }}
        - -server.http-read-timeout={{ default .Values.cortex.server_http_read_timeout .Values.ruler.server_http_read_timeout }}
        {{- end }}
        {{- if default .Values.cortex.server_http_write_timeout .Values.ruler.server_http_write_timeout }}
        - -server.http-write-timeout={{ default .Values.cortex.server_http_write_timeout .Values.ruler.server_http_write_timeout }}
        {{- end }}
        {{- if default .Values.cortex.server_register_instrumentation .Values.ruler.server_register_instrumentation }}
        - -server.register-instrumentation={{ default .Values.cortex.server_register_instrumentation .Values.ruler.server_register_instrumentation }}
        {{- end }}
        {{- if default .Values.cortex.stderrthreshold .Values.ruler.stderrthreshold }}
        - -stderrthreshold={{ default .Values.cortex.stderrthreshold .Values.ruler.stderrthreshold }}
        {{- end }}
        {{- if default .Values.cortex.store_cache_lookups_older_than .Values.ruler.store_cache_lookups_older_than }}
        - -store.cache-lookups-older-than={{ default .Values.cortex.store_cache_lookups_older_than .Values.ruler.store_cache_lookups_older_than }}
        {{- end }}
        {{- if default .Values.cortex.store_cardinality_cache_size .Values.ruler.store_cardinality_cache_size }}
        - -store.cardinality-cache-size={{ default .Values.cortex.store_cardinality_cache_size .Values.ruler.store_cardinality_cache_size }}
        {{- end }}
        {{- if default .Values.cortex.store_cardinality_cache_validity .Values.ruler.store_cardinality_cache_validity }}
        - -store.cardinality-cache-validity={{ default .Values.cortex.store_cardinality_cache_validity .Values.ruler.store_cardinality_cache_validity }}
        {{- end }}
        {{- if default .Values.cortex.store_cardinality_limit .Values.ruler.store_cardinality_limit }}
        - -store.cardinality-limit={{ default .Values.cortex.store_cardinality_limit .Values.ruler.store_cardinality_limit }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_cache_enable_diskcache .Values.ruler.store_index_cache_read_cache_enable_diskcache }}
        - -store.index-cache-read.cache.enable-diskcache={{ default .Values.cortex.store_index_cache_read_cache_enable_diskcache .Values.ruler.store_index_cache_read_cache_enable_diskcache }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_cache_enable_fifocache .Values.ruler.store_index_cache_read_cache_enable_fifocache }}
        - -store.index-cache-read.cache.enable-fifocache={{ default .Values.cortex.store_index_cache_read_cache_enable_fifocache .Values.ruler.store_index_cache_read_cache_enable_fifocache }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_default_validity .Values.ruler.store_index_cache_read_default_validity }}
        - -store.index-cache-read.default-validity={{ default .Values.cortex.store_index_cache_read_default_validity .Values.ruler.store_index_cache_read_default_validity }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_diskcache_path .Values.ruler.store_index_cache_read_diskcache_path }}
        - -store.index-cache-read.diskcache.path={{ default .Values.cortex.store_index_cache_read_diskcache_path .Values.ruler.store_index_cache_read_diskcache_path }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_diskcache_size .Values.ruler.store_index_cache_read_diskcache_size }}
        - -store.index-cache-read.diskcache.size={{ default .Values.cortex.store_index_cache_read_diskcache_size .Values.ruler.store_index_cache_read_diskcache_size }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_fifocache_duration .Values.ruler.store_index_cache_read_fifocache_duration }}
        - -store.index-cache-read.fifocache.duration={{ default .Values.cortex.store_index_cache_read_fifocache_duration .Values.ruler.store_index_cache_read_fifocache_duration }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_fifocache_size .Values.ruler.store_index_cache_read_fifocache_size }}
        - -store.index-cache-read.fifocache.size={{ default .Values.cortex.store_index_cache_read_fifocache_size .Values.ruler.store_index_cache_read_fifocache_size }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcache_write_back_buffer .Values.ruler.store_index_cache_read_memcache_write_back_buffer }}
        - -store.index-cache-read.memcache.write-back-buffer={{ default .Values.cortex.store_index_cache_read_memcache_write_back_buffer .Values.ruler.store_index_cache_read_memcache_write_back_buffer }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcache_write_back_goroutines .Values.ruler.store_index_cache_read_memcache_write_back_goroutines }}
        - -store.index-cache-read.memcache.write-back-goroutines={{ default .Values.cortex.store_index_cache_read_memcache_write_back_goroutines .Values.ruler.store_index_cache_read_memcache_write_back_goroutines }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_batchsize .Values.ruler.store_index_cache_read_memcached_batchsize }}
        - -store.index-cache-read.memcached.batchsize={{ default .Values.cortex.store_index_cache_read_memcached_batchsize .Values.ruler.store_index_cache_read_memcached_batchsize }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_expiration .Values.ruler.store_index_cache_read_memcached_expiration }}
        - -store.index-cache-read.memcached.expiration={{ default .Values.cortex.store_index_cache_read_memcached_expiration .Values.ruler.store_index_cache_read_memcached_expiration }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_hostname .Values.ruler.store_index_cache_read_memcached_hostname }}
        - -store.index-cache-read.memcached.hostname={{ default .Values.cortex.store_index_cache_read_memcached_hostname .Values.ruler.store_index_cache_read_memcached_hostname }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_max_idle_conns .Values.ruler.store_index_cache_read_memcached_max_idle_conns }}
        - -store.index-cache-read.memcached.max-idle-conns={{ default .Values.cortex.store_index_cache_read_memcached_max_idle_conns .Values.ruler.store_index_cache_read_memcached_max_idle_conns }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_parallelism .Values.ruler.store_index_cache_read_memcached_parallelism }}
        - -store.index-cache-read.memcached.parallelism={{ default .Values.cortex.store_index_cache_read_memcached_parallelism .Values.ruler.store_index_cache_read_memcached_parallelism }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_service .Values.ruler.store_index_cache_read_memcached_service }}
        - -store.index-cache-read.memcached.service={{ default .Values.cortex.store_index_cache_read_memcached_service .Values.ruler.store_index_cache_read_memcached_service }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_timeout .Values.ruler.store_index_cache_read_memcached_timeout }}
        - -store.index-cache-read.memcached.timeout={{ default .Values.cortex.store_index_cache_read_memcached_timeout .Values.ruler.store_index_cache_read_memcached_timeout }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_read_memcached_update_interval .Values.ruler.store_index_cache_read_memcached_update_interval }}
        - -store.index-cache-read.memcached.update-interval={{ default .Values.cortex.store_index_cache_read_memcached_update_interval .Values.ruler.store_index_cache_read_memcached_update_interval }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_validity .Values.ruler.store_index_cache_validity }}
        - -store.index-cache-validity={{ default .Values.cortex.store_index_cache_validity .Values.ruler.store_index_cache_validity }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_cache_enable_diskcache .Values.ruler.store_index_cache_write_cache_enable_diskcache }}
        - -store.index-cache-write.cache.enable-diskcache={{ default .Values.cortex.store_index_cache_write_cache_enable_diskcache .Values.ruler.store_index_cache_write_cache_enable_diskcache }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_cache_enable_fifocache .Values.ruler.store_index_cache_write_cache_enable_fifocache }}
        - -store.index-cache-write.cache.enable-fifocache={{ default .Values.cortex.store_index_cache_write_cache_enable_fifocache .Values.ruler.store_index_cache_write_cache_enable_fifocache }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_default_validity .Values.ruler.store_index_cache_write_default_validity }}
        - -store.index-cache-write.default-validity={{ default .Values.cortex.store_index_cache_write_default_validity .Values.ruler.store_index_cache_write_default_validity }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_diskcache_path .Values.ruler.store_index_cache_write_diskcache_path }}
        - -store.index-cache-write.diskcache.path={{ default .Values.cortex.store_index_cache_write_diskcache_path .Values.ruler.store_index_cache_write_diskcache_path }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_diskcache_size .Values.ruler.store_index_cache_write_diskcache_size }}
        - -store.index-cache-write.diskcache.size={{ default .Values.cortex.store_index_cache_write_diskcache_size .Values.ruler.store_index_cache_write_diskcache_size }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_fifocache_duration .Values.ruler.store_index_cache_write_fifocache_duration }}
        - -store.index-cache-write.fifocache.duration={{ default .Values.cortex.store_index_cache_write_fifocache_duration .Values.ruler.store_index_cache_write_fifocache_duration }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_fifocache_size .Values.ruler.store_index_cache_write_fifocache_size }}
        - -store.index-cache-write.fifocache.size={{ default .Values.cortex.store_index_cache_write_fifocache_size .Values.ruler.store_index_cache_write_fifocache_size }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcache_write_back_buffer .Values.ruler.store_index_cache_write_memcache_write_back_buffer }}
        - -store.index-cache-write.memcache.write-back-buffer={{ default .Values.cortex.store_index_cache_write_memcache_write_back_buffer .Values.ruler.store_index_cache_write_memcache_write_back_buffer }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcache_write_back_goroutines .Values.ruler.store_index_cache_write_memcache_write_back_goroutines }}
        - -store.index-cache-write.memcache.write-back-goroutines={{ default .Values.cortex.store_index_cache_write_memcache_write_back_goroutines .Values.ruler.store_index_cache_write_memcache_write_back_goroutines }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_batchsize .Values.ruler.store_index_cache_write_memcached_batchsize }}
        - -store.index-cache-write.memcached.batchsize={{ default .Values.cortex.store_index_cache_write_memcached_batchsize .Values.ruler.store_index_cache_write_memcached_batchsize }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_expiration .Values.ruler.store_index_cache_write_memcached_expiration }}
        - -store.index-cache-write.memcached.expiration={{ default .Values.cortex.store_index_cache_write_memcached_expiration .Values.ruler.store_index_cache_write_memcached_expiration }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_hostname .Values.ruler.store_index_cache_write_memcached_hostname }}
        - -store.index-cache-write.memcached.hostname={{ default .Values.cortex.store_index_cache_write_memcached_hostname .Values.ruler.store_index_cache_write_memcached_hostname }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_max_idle_conns .Values.ruler.store_index_cache_write_memcached_max_idle_conns }}
        - -store.index-cache-write.memcached.max-idle-conns={{ default .Values.cortex.store_index_cache_write_memcached_max_idle_conns .Values.ruler.store_index_cache_write_memcached_max_idle_conns }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_parallelism .Values.ruler.store_index_cache_write_memcached_parallelism }}
        - -store.index-cache-write.memcached.parallelism={{ default .Values.cortex.store_index_cache_write_memcached_parallelism .Values.ruler.store_index_cache_write_memcached_parallelism }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_service .Values.ruler.store_index_cache_write_memcached_service }}
        - -store.index-cache-write.memcached.service={{ default .Values.cortex.store_index_cache_write_memcached_service .Values.ruler.store_index_cache_write_memcached_service }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_timeout .Values.ruler.store_index_cache_write_memcached_timeout }}
        - -store.index-cache-write.memcached.timeout={{ default .Values.cortex.store_index_cache_write_memcached_timeout .Values.ruler.store_index_cache_write_memcached_timeout }}
        {{- end }}
        {{- if default .Values.cortex.store_index_cache_write_memcached_update_interval .Values.ruler.store_index_cache_write_memcached_update_interval }}
        - -store.index-cache-write.memcached.update-interval={{ default .Values.cortex.store_index_cache_write_memcached_update_interval .Values.ruler.store_index_cache_write_memcached_update_interval }}
        {{- end }}
        {{- if default .Values.cortex.store_max_query_length .Values.ruler.store_max_query_length }}
        - -store.max-query-length={{ default .Values.cortex.store_max_query_length .Values.ruler.store_max_query_length }}
        {{- end }}
        {{- if default .Values.cortex.store_min_chunk_age .Values.ruler.store_min_chunk_age }}
        - -store.min-chunk-age={{ default .Values.cortex.store_min_chunk_age .Values.ruler.store_min_chunk_age }}
        {{- end }}
        {{- if default .Values.cortex.store_query_chunk_limit .Values.ruler.store_query_chunk_limit }}
        - -store.query-chunk-limit={{ default .Values.cortex.store_query_chunk_limit .Values.ruler.store_query_chunk_limit }}
        {{- end }}
        {{- if default .Values.cortex.v .Values.ruler.v }}
        - -v={{ default .Values.cortex.v .Values.ruler.v }}
        {{- end }}
        {{- if default .Values.cortex.validation_create_grace_period .Values.ruler.validation_create_grace_period }}
        - -validation.create-grace-period={{ default .Values.cortex.validation_create_grace_period .Values.ruler.validation_create_grace_period }}
        {{- end }}
        {{- if default .Values.cortex.validation_max_label_names_per_series .Values.ruler.validation_max_label_names_per_series }}
        - -validation.max-label-names-per-series={{ default .Values.cortex.validation_max_label_names_per_series .Values.ruler.validation_max_label_names_per_series }}
        {{- end }}
        {{- if default .Values.cortex.validation_max_length_label_name .Values.ruler.validation_max_length_label_name }}
        - -validation.max-length-label-name={{ default .Values.cortex.validation_max_length_label_name .Values.ruler.validation_max_length_label_name }}
        {{- end }}
        {{- if default .Values.cortex.validation_max_length_label_value .Values.ruler.validation_max_length_label_value }}
        - -validation.max-length-label-value={{ default .Values.cortex.validation_max_length_label_value .Values.ruler.validation_max_length_label_value }}
        {{- end }}
        {{- if default .Values.cortex.validation_reject_old_samples .Values.ruler.validation_reject_old_samples }}
        - -validation.reject-old-samples={{ default .Values.cortex.validation_reject_old_samples .Values.ruler.validation_reject_old_samples }}
        {{- end }}
        {{- if default .Values.cortex.validation_reject_old_samples_max_age .Values.ruler.validation_reject_old_samples_max_age }}
        - -validation.reject-old-samples.max-age={{ default .Values.cortex.validation_reject_old_samples_max_age .Values.ruler.validation_reject_old_samples_max_age }}
        {{- end }}
        {{- if default .Values.cortex.vmodule .Values.ruler.vmodule }}
        - -vmodule={{ default .Values.cortex.vmodule .Values.ruler.vmodule }}
        {{- end }}
        ports:
        {{- if default .Values.cortex.server_http_listen_port .Values.ruler.server_http_listen_port }}
        - name: http
          containerPort: {{ default .Values.cortex.server_http_listen_port .Values.ruler.server_http_listen_port }}
          protocol: TCP
        {{- end }}
        {{- if default .Values.cortex.server_grpc_listen_port .Values.ruler.server_grpc_listen_port }}
        - name: grpc
          containerPort: {{ default .Values.cortex.server_grpc_listen_port .Values.ruler.server_grpc_listen_port }}
          protocol: TCP
        {{- end }}
        livenessProbe:
          httpGet:
            path: /ring
            port: http
        readinessProbe:
          httpGet:
            path: /ring
            port: http
        resources:
          {{- toYaml .Values.ruler.resources | nindent 10 }}
      {{- with .Values.ruler.nodeSelector }}
      nodeSelector:
        {{- toYaml . | nindent 8 }}
      {{- end }}
    {{- with .Values.ruler.affinity }}
      affinity:
        {{- toYaml . | nindent 8 }}
    {{- end }}
    {{- with .Values.ruler.tolerations }}
      tolerations:
        {{- toYaml . | nindent 8 }}
    {{- end }}
{{- end }}
